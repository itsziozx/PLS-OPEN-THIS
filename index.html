<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ GameBoy Birthday Gift</title>
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(45deg, #1a1a2e, #16213e, #0f3460);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        #gameboy-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        /* ===== SCREEN TRANSITIONS ===== */
        .screen {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
        }

        .screen.active {
            display: flex !important;
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== LOADING SCREEN ===== */
        #loading-screen .gameboy-screen {
            width: 600px;
            height: 400px;
            background: #000;
            border: 4px solid #00ff00;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #loading-screen .screen-content {
            text-align: center;
            width: 100%;
            padding: 40px;
        }

        #loading-screen .title {
            font-size: 48px;
            font-weight: bold;
            color: #00ff00;
            margin-bottom: 40px;
            letter-spacing: 4px;
            animation: glow 1.5s infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px #00ff00; }
            to { text-shadow: 0 0 20px #00ff00, 0 0 30px #00ff00; }
        }

        #loading-screen .loading-text {
            font-size: 24px;
            color: #00ff00;
            margin-bottom: 30px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% { opacity: 0.5; }
        }

        .progress-bar {
            width: 80%;
            height: 30px;
            background: #333;
            border: 2px solid #00ff00;
            margin: 0 auto;
            position: relative;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #00ff00;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #000;
            font-weight: bold;
            font-size: 16px;
            z-index: 2;
        }

        /* ===== MAIN GAMEBOY ===== */
        .gameboy-body {
            width: 400px;
            height: 600px;
            background: linear-gradient(145deg, #e8e8e8, #d0d0d0);
            border-radius: 20px 20px 40px 40px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.8);
            position: relative;
            z-index: 2;
            margin: auto;
        }

        .gameboy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 12px;
            color: #666;
        }

        .power-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .power-dot {
            width: 8px;
            height: 8px;
            background: #ff4444;
            border-radius: 50%;
            animation: powerBlink 2s infinite;
        }

        @keyframes powerBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .brand-text {
            font-weight: bold;
            font-size: 14px;
        }

        .gameboy-screen {
            width: 100%;
            height: 200px;
            background: #2d5016;
            border: 8px solid #1a1a1a;
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .gameboy-screen .screen-content {
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .birthday-title {
            color: #9bbc0f;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #9bbc0f;
        }

        .start-text {
            color: #ffff00;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .screen-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            font-size: 8px;
            color: #666;
        }

        .battery {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .battery-dot {
            width: 4px;
            height: 4px;
            background: #ff4444;
            border-radius: 50%;
        }

        /* ===== MENU BUTTONS ===== */
        .menu-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 30px;
        }

        .menu-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-transform: uppercase;
            color: white;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .message-btn { background: linear-gradient(145deg, #4a90e2, #357abd); }
        .gallery-btn { background: linear-gradient(145deg, #e74c3c, #c0392b); }
        .music-btn { background: linear-gradient(145deg, #9b59b6, #8e44ad); }
        .tetris-btn { background: linear-gradient(145deg, #27ae60, #229954); }
        .pacman-btn { background: linear-gradient(145deg, #f39c12, #e67e22); }

        /* ===== CONTROLS ===== */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dpad {
            width: 100px;
            height: 100px;
            position: relative;
        }

        .dpad-center {
            width: 100%;
            height: 100%;
            background: #333;
            position: relative;
            border-radius: 50%;
        }

        .dpad-center div {
            position: absolute;
            background: #555;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }

        .dpad-up, .dpad-down {
            width: 40px;
            height: 30px;
            left: 50%;
            transform: translateX(-50%);
        }

        .dpad-up { top: 5px; border-radius: 8px 8px 0 0; }
        .dpad-down { bottom: 5px; border-radius: 0 0 8px 8px; }
        .dpad-left, .dpad-right {
            width: 30px;
            height: 40px;
            top: 50%;
            transform: translateY(-50%);
        }

        .dpad-left { left: 5px; border-radius: 8px 0 0 8px; }
        .dpad-right { right: 5px; border-radius: 0 8px 8px 0; }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 20px;
            cursor: pointer;
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .bottom-controls {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: #666;
            color: white;
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
        }

        .speaker-grille {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 25% 25%, #333 2px, transparent 2px),
                        radial-gradient(circle at 75% 25%, #333 2px, transparent 2px),
                        radial-gradient(circle at 25% 75%, #333 2px, transparent 2px),
                        radial-gradient(circle at 75% 75%, #333 2px, transparent 2px);
            background-size: 8px 8px;
        }

        /* ===== PAGE CONTAINER ===== */
        .page-container {
            width: 400px;
            height: 600px;
            background: linear-gradient(145deg, #7b68ee, #6a5acd);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 4px solid #ffd700;
            display: flex;
            flex-direction: column;
            margin: auto;
        }

        .page-screen {
            flex: 1;
            background: #2d5016;
            border: 4px solid #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .page-header {
            background: #1a1a1a;
            color: #9bbc0f;
            padding: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .page-controls {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .page-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            background: #4a90e2;
            color: white;
            transition: all 0.2s;
        }

        .page-btn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div id="gameboy-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen active">
            <div class="gameboy-screen">
                <div class="screen-content">
                    <h1 class="title">BIRTHDAY GIFT</h1>
                    <div class="loading-text" id="loading-text">&gt; INITIALIZING..._</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                        <div class="progress-text" id="progress-text">0%</div>
                    </div>
                </div>
            </div>
                </div>
                <!-- Main Screen -->
<div id="main-screen" class="screen">
    <div class="gameboy-body">
        <div class="gameboy-header">
            <div class="power-indicator">
                <span class="power-dot"></span>
                <span class="power-text">POWER</span>
            </div>
            <div class="brand-text">GAME-BOY</div>
        </div>
        
        <div class="gameboy-screen">
            <div class="screen-content">
                <h1 class="birthday-title">Happy Birthday!</h1>
                <div class="start-text">Press START</div>
                <div class="screen-info">
                    <span class="dot-matrix">DOT MATRIX WITH STEREO SOUND</span>
                    <span class="battery">
                        <span class="battery-dot"></span>
                        BATTERY
                    </span>
                </div>
            </div>
        </div>

        <div class="menu-buttons">
            <button class="menu-btn message-btn" onclick="showScreen('message')">MESSAGE</button>
            <button class="menu-btn gallery-btn" onclick="showScreen('gallery')">GALLERY</button>
            <button class="menu-btn music-btn" onclick="showScreen('music')">MUSIC</button>
            <button class="menu-btn tetris-btn" onclick="showScreen('tetris')">TETRIS</button>
            <button class="menu-btn pacman-btn" onclick="showScreen('pacman')">PACMAN</button>
        </div>

        <div class="controls">
            <div class="dpad">
                <div class="dpad-center">
                    <div class="dpad-up">‚Üë</div>
                    <div class="dpad-left">‚Üê</div>
                    <div class="dpad-right">‚Üí</div>
                    <div class="dpad-down">‚Üì</div>
                </div>
            </div>
            <div class="action-buttons">
                <button class="action-btn b-btn">B</button>
                <button class="action-btn a-btn">A</button>
            </div>
        </div>

        <div class="bottom-controls">
            <button class="control-btn select-btn">SELECT</button>
            <button class="control-btn start-btn" onclick="showScreen('main')">START</button>
        </div>

        <div class="speaker-grille"></div>
    </div>
</div>

<!-- Message Screen -->
<div id="message-screen" class="screen">
    <div class="page-container">
        <div class="page-screen">
            <div class="page-header">üìù MESSAGE</div>
            
            <div class="letter-selector">
                <button class="letter-btn" onclick="selectLetter(0)">üì® 1</button>
                <button class="letter-btn" onclick="selectLetter(1)">üì® 2</button>
                <button class="letter-btn" onclick="selectLetter(2)">üì® 3</button>
                <button class="letter-btn" onclick="selectLetter(3)">üì® 4</button>
                <button class="letter-btn" onclick="selectLetter(4)">üì® 5</button>
                <button class="letter-btn" onclick="selectLetter(5)">üì® 6</button>
            </div>
            
            <div class="message-content" id="message-content"></div>
            <button class="skip-btn" id="skip-btn">SKIP</button>
        </div>
        <div class="page-controls">
            <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
        </div>
    </div>
</div>

<!-- Gallery Screen -->
<div id="gallery-screen" class="screen">
    <div class="page-container">
        <div class="page-screen">
            <div class="page-header">üñºÔ∏è GALLERY</div>
            <div class="gallery-content">
                <div class="photobox-header">
                    <div class="photobox-dot red"></div>
                    <span class="photobox-title">PHOTOBOX</span>
                    <div class="photobox-dot green"></div>
                </div>
                <div class="photobox-progress" id="photobox-progress">üì∏ READY TO PRINT</div>
                <div class="photo-display" id="photo-display">
                    <div class="photo-placeholder">Press START PRINT to begin</div>
                </div>
                <div class="photobox-controls">
                    <button class="photo-btn" id="photo-btn">START PRINT</button>
                </div>
            </div>
        </div>
        <div class="page-controls">
            <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
        </div>
    </div>
</div>

<style>
    /* Gallery specific styles */
    .gallery-content {
        flex: 1;
        padding: 15px;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
    }
    .photobox-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #666;
        padding: 8px 12px;
        border-radius: 4px;
        margin-bottom: 10px;
    }
    .photobox-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
    }
    .photobox-dot.red { background: #ff4444; }
    .photobox-dot.green { background: #44ff44; }
    .photobox-title {
        color: #ffff00;
        font-size: 12px;
        font-weight: bold;
    }
    .photobox-progress {
        background: #333;
        border-radius: 4px;
        margin-bottom: 15px;
        padding: 8px;
        color: #9bbc0f;
        font-size: 11px;
        text-align: center;
    }
    .photo-display {
        background: #1a1a2e;
        border-radius: 8px;
        padding: 15px;
        min-height: 250px;
        max-height: 300px;
        overflow-y: auto;
        margin-bottom: 15px;
    }
    .photo-strip {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .photo-strip-header {
        text-align: center;
        color: #9bbc0f;
        font-size: 12px;
        font-weight: bold;
        margin-bottom: 5px;
    }
    .photo-frames-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    .photo-frame {
        background: #f0f0f0;
        border: 3px solid #333;
        border-radius: 6px;
        height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }
    .photo-frame.filled {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
    }
    .photo-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .photo-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0,0,0,0.7);
        color: white;
        padding: 5px;
        text-align: center;
        font-size: 10px;
    }
    .photo-placeholder {
        text-align: center;
        color: #9bbc0f;
        font-size: 14px;
        margin-top: 50px;
    }
    .photobox-controls {
        display: flex;
        justify-content: center;
        margin-top: 10px;
    }
    .photo-btn {
        padding: 10px 20px;
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        width: 100%;
    }
    .photo-btn:disabled {
        background: #666;
        cursor: not-allowed;
    }
    .photo-strip-footer {
        text-align: center;
        color: #9bbc0f;
        font-size: 12px;
        font-weight: bold;
        margin-top: 5px;
    }
    .message-content {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        color: #9bbc0f;
        font-size: 14px;
        line-height: 1.6;
        white-space: pre-wrap;
    }
    .letter-selector {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        padding: 10px;
        background: #1a1a2e;
        border-bottom: 2px solid #9bbc0f;
    }
    .letter-btn {
        flex: 1;
        min-width: 60px;
        padding: 8px;
        background: #4a90e2;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
    }
    .letter-btn.active {
        background: #f39c12;
        color: #000;
        font-weight: bold;
    }
    .skip-btn {
        margin: 10px auto;
        padding: 6px 12px;
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        width: fit-content;
    }
    </style>
        <!-- Music Screen -->
    <div id="music-screen" class="screen">
        <div class="page-container">
            <div class="page-screen">
                <div class="page-header">üéµ MUSIC</div>
                <div class="music-content">
                    <div class="playlist">
                        <div class="song" data-index="0" onclick="playSong(0)">üéµ 1. Happy Birthday</div>
                        <div class="song" data-index="1" onclick="playSong(1)">üéµ 2. My Love Mine All Mine - Mitski</div>
                        <div class="song" data-index="2" onclick="playSong(2)">üéµ 3. Line Without a Hook - Ricky Montgomery</div>
                        <div class="song" data-index="3" onclick="playSong(3)">üéµ 4. 505 - Arctic Monkeys</div>
                        <div class="song" data-index="4" onclick="playSong(4)">üéµ 5. RUDE! - Hearts2Hearts</div>
                        <div class="song" data-index="5" onclick="playSong(5)">üéµ 6. Really Like You - BABYMONSTER</div>
                    </div>
                    <div class="music-controls">
                        <button onclick="prevSong()">‚èÆ</button>
                        <button onclick="playPause()" id="play-pause-btn">‚èØ</button>
                        <button onclick="nextSong()">‚è≠</button>
                    </div>
                    <div class="now-playing" id="now-playing">üéú Not Playing</div>
                    
                    <div class="stats-panel">
                        <div class="stats-row">
                            <span>Messages Read:</span>
                            <span class="stats-value" id="stats-messages">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Photos Viewed:</span>
                            <span class="stats-value" id="stats-photos">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Games Played:</span>
                            <span class="stats-value" id="stats-games">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Songs Played:</span>
                            <span class="stats-value" id="stats-songs">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Pacman Score:</span>
                            <span class="stats-value" id="stats-pacman">0</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-controls">
                <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
                <button class="page-btn" onclick="showCake()">üéÇ CAKE</button>
            </div>
        </div>
    </div>

    <!-- Tetris Screen -->
    <div id="tetris-screen" class="screen">
        <div class="page-container">
            <div class="page-screen">
                <div class="tetris-header">
                    <div class="tetris-title">üéÆ TETRIS</div>
                    <div class="tetris-stats">
                        <div class="stat">Score: <span id="score">0</span></div>
                        <div class="stat">Level: <span id="level">1</span></div>
                        <div class="stat">Lines: <span id="lines">0</span></div>
                    </div>
                </div>
                <div class="tetris-game">
                    <canvas id="tetris-canvas" width="300" height="400"></canvas>
                </div>
                <div class="tetris-controls">
                    <button class="tetris-btn" onclick="moveTetrisPiece(-1)">‚óÄ</button>
                    <button class="tetris-btn" onclick="rotateTetrisPiece()">‚Üª ROTATE</button>
                    <button class="tetris-btn" onclick="moveTetrisPiece(1)">‚ñ∂</button>
                    <button class="tetris-btn" onclick="startTetrisGame()">üîÑ NEW</button>
                </div>
            </div>
            <div class="page-controls">
                <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
            </div>
        </div>
    </div>

    <!-- Pacman Screen -->
    <div id="pacman-screen" class="screen">
        <div class="page-container">
            <div class="page-screen">
                <div class="pacman-header">üëæ PACMAN</div>
                <div class="pacman-stats">
                    <div class="stat">Score: <span id="pacman-score">0</span></div>
                    <div class="stat">Level: <span id="pacman-level">1</span></div>
                </div>
                <div class="pacman-game">
                    <canvas id="pacman-canvas" width="300" height="300"></canvas>
                </div>
                <div class="pacman-controls">
                    <button class="pacman-btn" onclick="startPacman()">üîÑ NEW GAME</button>
                    <button class="pacman-btn" onclick="pausePacman()">‚èØ PAUSE</button>
                </div>
                <div class="pacman-controls" style="margin-top: 5px;">
                    <button class="pacman-btn" onclick="movePacman('up')">‚Üë</button>
                    <button class="pacman-btn" onclick="movePacman('left')">‚Üê</button>
                    <button class="pacman-btn" onclick="movePacman('down')">‚Üì</button>
                    <button class="pacman-btn" onclick="movePacman('right')">‚Üí</button>
                </div>
            </div>
            <div class="page-controls">
                <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
            </div>
        </div>
    </div>

    <style>
        /* Music styles */
        .music-content {
            flex: 1;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        .playlist {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        .song {
            padding: 10px;
            margin-bottom: 5px;
            background: #1a1a2e;
            color: #9bbc0f;
            border-radius: 4px;
            cursor: pointer;
        }
        .song:hover { background: #2a2a4e; }
        .song.playing {
            background: #4a90e2;
            color: white;
            font-weight: bold;
        }
        .music-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
        }
        .music-controls button {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: #4a90e2;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
        .now-playing {
            text-align: center;
            color: #9bbc0f;
            font-size: 12px;
            padding: 5px;
        }
        .stats-panel {
            background: #1a1a1a;
            border: 2px solid #9bbc0f;
            border-radius: 8px;
            padding: 10px;
            color: #9bbc0f;
            font-size: 11px;
        }
        .stats-row {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
        .stats-value {
            color: #ffff00;
            font-weight: bold;
        }
        
        /* Tetris styles */
        .tetris-header {
            background: #1a1a1a;
            color: #9bbc0f;
            padding: 10px;
            text-align: center;
        }
        .tetris-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 5px;
            font-size: 12px;
        }
        .tetris-game {
            display: flex;
            justify-content: center;
            padding: 10px;
            background: #000;
        }
        #tetris-canvas {
            border: 2px solid #9bbc0f;
            background: #000;
        }
        .tetris-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px;
        }
        .tetris-btn {
            padding: 8px 12px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        /* Pacman styles */
        .pacman-header {
            background: #1a1a1a;
            color: #f39c12;
            padding: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        .pacman-stats {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: #1a1a2e;
            color: #f39c12;
            font-size: 12px;
        }
        .pacman-game {
            display: flex;
            justify-content: center;
            padding: 10px;
            background: #000;
        }
        #pacman-canvas {
            border: 2px solid #f39c12;
            background: #000;
        }
        .pacman-btn {
            padding: 8px 12px;
            background: #f39c12;
            color: #000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }
    </style>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="modal">
        <div class="modal-content">
            <div class="game-over-text">GAME OVER</div>
            <button class="modal-btn" onclick="closeGameOver()">OK</button>
        </div>
    </div>

    <!-- Final Message Modal -->
    <div id="final-message-modal" class="modal">
        <div class="modal-content">
            <div class="final-message-title">üéÇ HAPPY BIRTHDAY! üéÇ</div>
            <div class="final-message-text">
                <p>Even if you lose in the game,</p>
                <p>you always win in my heart!</p>
                <p class="love-text">I LOVE YOU TWIN üíï</p>
            </div>
            <button class="modal-btn" onclick="closeFinal()">OK</button>
        </div>
    </div>

    <!-- Birthday Cake Modal -->
    <div id="cake-modal" class="modal">
        <div class="modal-content">
            <div class="cake-container">
                <div class="cake">
                    <div class="plate"></div>
                    <div class="layer layer-bottom"></div>
                    <div class="layer layer-middle"></div>
                    <div class="layer layer-top"></div>
                    <div class="icing"></div>
                    <div class="candle" id="birthday-candle" onclick="blowCandle()">
                        <div class="flame" id="flame"></div>
                    </div>
                </div>
                <p class="cake-message" id="cake-message">Happy Birthday, Mango! üéÇ</p>
                <button class="modal-btn" onclick="closeCake()">Close</button>
            </div>
        </div>
    </div>

    <!-- Secret Easter Egg Modal -->
    <div id="secret-modal" class="modal">
        <div class="modal-content">
            <div class="final-message-title">üéÆ SECRET UNLOCKED! üéÆ</div>
            <div class="final-message-text">
                <p>You found the secret code!</p>
                <p class="love-text">Mango is the best TWIN ever! üíï</p>
            </div>
            <button class="modal-btn" onclick="closeSecret()">OK</button>
        </div>
    </div>

    <style>
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: #2d5016;
            border: 4px solid #9bbc0f;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            max-width: 300px;
        }
        .game-over-text {
            color: #ff4444;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            animation: blink 1s infinite;
        }
        .final-message-title {
            color: #ffff00;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .final-message-text {
            color: #9bbc0f;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .love-text {
            color: #ff69b4;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
        }
        .modal-btn {
            padding: 10px 20px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }
        
        /* Cake styles */
        .cake-container {
            padding: 20px;
            text-align: center;
        }
        .cake {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
        }
        .plate {
            width: 220px;
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            position: absolute;
            bottom: -10px;
            left: -10px;
        }
        .layer {
            width: 200px;
            height: 40px;
            background: #f8b3b3;
            border-radius: 10px;
            position: absolute;
            left: 0;
        }
        .layer-bottom { bottom: 20px; background: #f8a3a3; }
        .layer-middle { bottom: 60px; background: #f89393; width: 180px; left: 10px; }
        .layer-top { bottom: 100px; background: #f88383; width: 160px; left: 20px; }
        .icing {
            width: 220px;
            height: 10px;
            background: #fff0f0;
            border-radius: 5px;
            position: absolute;
            bottom: 70px;
            left: -10px;
            opacity: 0.5;
        }
        .candle {
            width: 20px;
            height: 60px;
            background: #ffd700;
            border-radius: 5px;
            position: absolute;
            bottom: 160px;
            left: 90px;
            cursor: pointer;
        }
        .flame {
            width: 15px;
            height: 25px;
            background: #ff9900;
            border-radius: 50%;
            position: absolute;
            top: -20px;
            left: 2.5px;
            animation: flicker 0.3s infinite alternate;
        }
        @keyframes flicker {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.2); opacity: 0.8; }
        }
        .candle.blown .flame { display: none; }
        .cake-message {
            color: #9bbc0f;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
    </div>
    <script>
    // Game state
    let currentScreen = 'loading';
    let tetrisGame = null;
    let gameScore = 0;
    let gameLevel = 1;
    let gameLines = 0;
    let typewriterInterval = null;
    let isTyping = false;
    let currentPhotoIndex = 0;
    let currentSongIndex = 0;
    let isPlaying = false;
    let gameOverTimer = null;
    let audioPlayer = null;
    let currentLetterIndex = 0;
    let pacmanGame = { running: false };
    let pacmanInterval = null;
    let pacmanPaused = false;
    
    // Stats
    let stats = {
        messagesRead: 0,
        photosViewed: 0,
        gamesPlayed: 0,
        songsPlayed: 0,
        pacmanScore: 0
    };
    
    // Photos (with placeholder images)
    const photos = [
        { text: 'TWIN MEMORY 1 üéÆ', color: '#ff6b6b' },
        { text: 'TWIN MEMORY 2 üéÇ', color: '#4ecdc4' },
        { text: 'TWIN MEMORY 3 ü§™', color: '#45b7d1' },
        { text: 'TWIN MEMORY 4 üí™', color: '#96ceb4' },
        { text: 'TWIN MEMORY 5 üòÇ', color: '#ffeaa7' },
        { text: 'TWIN MEMORY 6 üåà', color: '#dfe6e9' },
        { text: 'TWIN MEMORY 7 üéâ', color: '#fab1a0' },
        { text: 'TWIN MEMORY 8 üôè', color: '#a29bfe' }
    ];

    // Song titles
    const songTitles = [
        'Happy Birthday',
        'My Love Mine All Mine - Mitski',
        'Line Without a Hook - Ricky Montgomery',
        '505 - Arctic Monkeys',
        'RUDE! - Hearts2Hearts',
        'Really Like You - BABYMONSTER'
    ];

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        initializeApp();
        loadStats();
    });

    function initializeApp() {
        simulateLoading();
        initializeTetris();
    }

    function simulateLoading() {
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        const loadingText = document.getElementById('loading-text');
        
        let progress = 0;
        const messages = [
            'INITIALIZING..._',
            'LOADING MEMORIES..._',
            'PREPARING SURPRISE..._',
            'ALMOST READY..._',
            'LOADING COMPLETE!_'
        ];
        
        const interval = setInterval(() => {
            progress += Math.floor(Math.random() * 10) + 5;
            if (progress > 100) progress = 100;
            
            progressFill.style.width = progress + '%';
            progressText.textContent = progress + '%';
            
            const msgIndex = Math.floor((progress / 100) * (messages.length - 1));
            loadingText.textContent = '> ' + messages[msgIndex];
            
            if (progress >= 100) {
                clearInterval(interval);
                setTimeout(() => {
                    showScreen('main');
                }, 1000);
            }
        }, 200);
    }

    window.showScreen = function(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        
        const targetScreen = document.getElementById(screenId + '-screen');
        if (targetScreen) {
            targetScreen.classList.add('active');
            currentScreen = screenId;
            
            if (screenId === 'message') selectLetter(0);
            if (screenId === 'gallery') initializeGallery();
            if (screenId === 'music') initializeMusic();
        }
    };

    // Stats functions
    function updateStats(statName) {
        stats[statName]++;
        localStorage.setItem('gameboyStats', JSON.stringify(stats));
        displayStats();
    }
    
    function loadStats() {
        const saved = localStorage.getItem('gameboyStats');
        if (saved) {
            stats = JSON.parse(saved);
        }
        displayStats();
    }
    
    function displayStats() {
        document.getElementById('stats-messages').textContent = stats.messagesRead || 0;
        document.getElementById('stats-photos').textContent = stats.photosViewed || 0;
        document.getElementById('stats-games').textContent = stats.gamesPlayed || 0;
        document.getElementById('stats-songs').textContent = stats.songsPlayed || 0;
        document.getElementById('stats-pacman').textContent = stats.pacmanScore || 0;
    }

    // Message functions
    function selectLetter(index) {
        currentLetterIndex = index;
        
        document.querySelectorAll('.letter-btn').forEach((btn, i) => {
            if (i === index) btn.classList.add('active');
            else btn.classList.remove('active');
        });
        
        const letters = [
            `Hi Mango... I've been meaning to tell you this for so long.`,
            `Remember when we first met? You were so loud and weird.`,
            `You were there when I was at my lowest. Thank you.`,
            `I love our random conversations about everything and nothing.`,
            `Wherever life takes us, you'll always be my TWIN.`,
            `You are my home, Mango. Happy Birthday! üíï`
        ];
        
        const messageContent = document.getElementById('message-content');
        messageContent.innerHTML = letters[index];
        updateStats('messagesRead');
    }

    function skipMessage() {
        const messageContent = document.getElementById('message-content');
        messageContent.innerHTML = messageContent.innerHTML;
    }
                // Gallery functions
        function initializeGallery() {
            const photoDisplay = document.getElementById('photo-display');
            photoDisplay.innerHTML = '<div class="photo-placeholder">Press START PRINT to begin</div>';
            document.getElementById('photobox-progress').textContent = 'üì∏ READY TO PRINT';
            document.getElementById('photo-btn').disabled = false;
            document.getElementById('photo-btn').textContent = 'START PRINT';
            currentPhotoIndex = 0;
        }

        function startPhotoShow() {
            const photoBtn = document.getElementById('photo-btn');
            const photoDisplay = document.getElementById('photo-display');
            const progressDiv = document.getElementById('photobox-progress');
            
            photoBtn.disabled = true;
            photoBtn.textContent = 'PRINTING...';
            progressDiv.textContent = 'INITIALIZING CAMERA...';
            
            let framesHTML = '';
            for (let i = 0; i < photos.length; i++) {
                framesHTML += `
                    <div class="photo-frame" id="frame-${i+1}" style="background: ${photos[i].color};">
                        <div class="photo-content" style="color:white; text-align:center; padding:10px;">${photos[i].text}</div>
                    </div>
                `;
            }
            
            photoDisplay.innerHTML = `
                <div class="photo-strip">
                    <div class="photo-strip-header">PHOTOSTRIP SESSION</div>
                    <div class="photo-frames-container">
                        ${framesHTML}
                    </div>
                    <div class="photo-strip-footer">üéÇ HAPPY BIRTHDAY! üéÇ</div>
                </div>
            `;
            
            currentPhotoIndex = photos.length;
            progressDiv.textContent = 'üéâ PHOTO STRIP COMPLETE! üéâ';
            photoBtn.textContent = 'PRINT AGAIN';
            photoBtn.disabled = false;
            updateStats('photosViewed');
        }

        // Music functions
        function initializeMusic() {
            if (!audioPlayer) {
                audioPlayer = new Audio();
                audioPlayer.addEventListener('ended', nextSong);
            }
            updateNowPlaying();
        }

        function playSong(index) {
            if (index < 0 || index >= 6) return;
            currentSongIndex = index;
            updateNowPlaying();
            updateStats('songsPlayed');
            
            document.querySelectorAll('.song').forEach((song, i) => {
                if (i === currentSongIndex) song.classList.add('playing');
                else song.classList.remove('playing');
            });
        }

        function playPause() {
            isPlaying = !isPlaying;
            document.getElementById('play-pause-btn').textContent = isPlaying ? '‚è∏' : '‚èØ';
        }

        function prevSong() {
            let newIndex = currentSongIndex - 1;
            if (newIndex < 0) newIndex = 5;
            playSong(newIndex);
        }

        function nextSong() {
            let newIndex = currentSongIndex + 1;
            if (newIndex >= 6) newIndex = 0;
            playSong(newIndex);
        }

        function updateNowPlaying() {
            document.getElementById('now-playing').textContent = `üéú Now Playing: ${songTitles[currentSongIndex]}`;
        }

        // Cake functions
        function showCake() {
            document.getElementById('cake-modal').classList.add('active');
        }
        
        function closeCake() {
            document.getElementById('cake-modal').classList.remove('active');
        }
        
        function blowCandle() {
            const candle = document.getElementById('birthday-candle');
            const message = document.getElementById('cake-message');
            candle.classList.add('blown');
            message.textContent = 'üéâ HAPPY BIRTHDAY, MANGO! üéâ';
        }

        // Modal functions
        function closeGameOver() {
            document.getElementById('game-over-modal').classList.remove('active');
            showScreen('main');
        }
        
        function closeFinal() {
            document.getElementById('final-message-modal').classList.remove('active');
            showScreen('main');
        }
        
        function closeSecret() {
            document.getElementById('secret-modal').classList.remove('active');
        }

        // Tetris functions
        function initializeTetris() {
            tetrisGame = { running: false };
        }

        function startTetrisGame() {
            tetrisGame.running = true;
            gameScore = Math.floor(Math.random() * 1000);
            gameLines = Math.floor(Math.random() * 50);
            gameLevel = Math.floor(gameLines / 10) + 1;
            updateTetrisStats();
            drawTetrisBoard();
            updateStats('gamesPlayed');
            
            setTimeout(() => {
                if (tetrisGame?.running) gameOver();
            }, 5000);
        }

        function moveTetrisPiece(dir) {
            if (!tetrisGame?.running) return;
            gameScore += 10;
            updateTetrisStats();
        }

        function rotateTetrisPiece() {
            if (!tetrisGame?.running) return;
            gameScore += 5;
            updateTetrisStats();
        }

        function updateTetrisStats() {
            document.getElementById('score').textContent = gameScore;
            document.getElementById('level').textContent = gameLevel;
            document.getElementById('lines').textContent = gameLines;
        }

        function drawTetrisBoard() {
            const canvas = document.getElementById('tetris-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#9bbc0f';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 10; i++) {
                ctx.beginPath();
                ctx.moveTo(i * 30, 0);
                ctx.lineTo(i * 30, canvas.height);
                ctx.stroke();
            }
            
            for (let i = 0; i <= 20; i++) {
                ctx.beginPath();
                ctx.moveTo(0, i * 20);
                ctx.lineTo(canvas.width, i * 20);
                ctx.stroke();
            }
            
            // Draw sample block
            ctx.fillStyle = '#f00';
            ctx.fillRect(60, 60, 30, 30);
            ctx.fillStyle = '#0f0';
            ctx.fillRect(90, 60, 30, 30);
            ctx.fillStyle = '#00f';
            ctx.fillRect(60, 90, 30, 30);
        }

        function gameOver() {
            tetrisGame.running = false;
            document.getElementById('game-over-modal').classList.add('active');
        }

        // Pacman functions
        function startPacman() {
            pacmanGame.running = true;
            pacmanGame.score = 0;
            pacmanGame.level = 1;
            document.getElementById('pacman-score').textContent = '0';
            document.getElementById('pacman-level').textContent = '1';
            updateStats('gamesPlayed');
            stats.pacmanScore += 10;
            displayStats();
            drawPacmanBoard();
        }

        function pausePacman() {
            pacmanPaused = !pacmanPaused;
        }

        function movePacman(dir) {
            if (!pacmanGame?.running || pacmanPaused) return;
            stats.pacmanScore += 5;
            displayStats();
        }

        function drawPacmanBoard() {
            const canvas = document.getElementById('pacman-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw maze
            ctx.fillStyle = '#00f';
            ctx.fillRect(50, 50, 200, 10);
            ctx.fillRect(50, 240, 200, 10);
            ctx.fillRect(50, 50, 10, 200);
            ctx.fillRect(240, 50, 10, 200);
            
            // Draw dots
            ctx.fillStyle = '#fff';
            for (let y = 70; y < 230; y += 20) {
                for (let x = 70; x < 230; x += 20) {
                    if (x !== 150 || y !== 150) {
                        ctx.beginPath();
                        ctx.arc(x, y, 3, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
            }
            
            // Draw Pacman
            ctx.fillStyle = '#ff0';
            ctx.beginPath();
            ctx.arc(150, 150, 15, 0.2, 1.8 * Math.PI);
            ctx.lineTo(150, 150);
            ctx.fill();
        }
    </script>
</body>
</html>
